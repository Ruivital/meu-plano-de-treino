<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Plano de Treino Flex√≠vel - Fitness Factory</title>
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192x192.png">
    <meta name="theme-color" content="#1a1a1a"/>
    <style>
        :root {
            --background-color: #1a1a1a;
            --text-color: #e0e0e0;
            --primary-color: #4CAF50; /* Green */
            --secondary-color: #555;
            --button-hover-color: #45a049;
            --border-color: #333;
            --card-background: #2a2a2a;
            --done-color: #28a745;
            --error-color: #dc3545;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        header {
            background-color: var(--primary-color);
            color: white;
            padding: 15px 0;
            text-align: center;
            font-size: 1.8em;
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        main {
            flex-grow: 1;
            padding: 20px;
            max-width: 900px;
            margin: 20px auto;
            background-color: var(--card-background);
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
        }

        .button-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-bottom: 25px;
        }

        .btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.1em;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }

        .btn:hover {
            background-color: var(--button-hover-color);
            transform: translateY(-2px);
        }

        .btn:active {
            transform: translateY(0);
        }

        .treino {
            display: none;
            padding: 15px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background-color: var(--background-color);
        }

        .treino h2 {
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.6em;
        }

        .exercicio {
            background-color: var(--card-background);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            margin-bottom: 15px;
            padding: 15px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .exercicio:hover {
            background-color: #3a3a3a;
        }

        .exercicio h3 {
            margin-top: 0;
            color: var(--text-color);
            font-size: 1.3em;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .exercicio .detalhes {
            display: none;
            margin-top: 15px;
            border-top: 1px solid var(--border-color);
            padding-top: 15px;
        }

        .detalhes p {
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .detalhes img {
            max-width: 100%;
            height: auto;
            border-radius: 5px;
            margin: 10px 0;
        }

        .detalhes a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: bold;
        }

        .detalhes a:hover {
            text-decoration: underline;
        }

        .input-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }

        .input-group label {
            white-space: nowrap;
        }

        .input-group input[type="number"],
        .input-group input[type="text"] {
            padding: 8px;
            border-radius: 5px;
            border: 1px solid var(--border-color);
            background-color: #444;
            color: var(--text-color);
            width: 80px;
        }

        .input-group input[type="checkbox"] {
            width: 20px;
            height: 20px;
            accent-color: var(--primary-color);
            cursor: pointer;
        }
        
        .exercicio.feito {
            background-color: var(--done-color);
            color: white;
        }

        .exercicio.feito h3, .exercicio.feito p, .exercicio.feito label {
            color: white;
        }

        .exercicio.feito .detalhes a {
            color: #ccffcc;
        }

        .finalizar-btn, .export-btn, .history-btn, .notification-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.1em;
            margin-top: 20px;
            width: 100%;
            transition: background-color 0.3s ease;
        }

        .finalizar-btn:hover, .export-btn:hover, .history-btn:hover, .notification-btn:hover {
            background-color: var(--button-hover-color);
        }

        #history-modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.8);
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: var(--card-background);
            margin: 15% auto;
            padding: 20px;
            border: 1px solid var(--border-color);
            width: 80%;
            max-width: 600px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.7);
            position: relative;
        }

        .close-button {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close-button:hover,
        .close-button:focus {
            color: white;
            text-decoration: none;
            cursor: pointer;
        }

        #history-list {
            max-height: 400px;
            overflow-y: auto;
            margin-top: 20px;
            border-top: 1px solid var(--border-color);
            padding-top: 10px;
        }

        .history-item {
            background-color: var(--background-color);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 10px;
            font-size: 0.9em;
        }

        .history-item strong {
            color: var(--primary-color);
        }

        .history-item ul {
            list-style: none;
            padding: 0;
            margin-top: 5px;
        }

        .history-item ul li {
            margin-bottom: 3px;
            display: flex;
            justify-content: space-between;
        }

        @media (max-width: 768px) {
            header {
                font-size: 1.5em;
            }
            main {
                margin: 10px;
                padding: 15px;
            }
            .btn {
                padding: 10px 15px;
                font-size: 1em;
            }
        }
    </style>
</head>
<body>
    <header>Plano de Treino Flex√≠vel</header>
    <main>
        <div class="button-container">
            <button class="btn" onclick="mostrar('treinoA')">Treino A</button>
            <button class="btn" onclick="mostrar('treinoB')">Treino B</button>
            <button class="btn" onclick="mostrar('treinoC')">Treino C</button>
            <button class="btn" onclick="mostrar('treinoD')">Treino D</button>
        </div>

        <div id="treinoA" class="treino">
            <h2>üí™ Treino A ‚Äì Peito, Tr√≠ceps, Core + Cardio</h2>
            <div class="exercicio" onclick="toggleDetalhes(this)">
                <h3>Passadeira (marcha inclinada) <span class="reps">15 min</span></h3>
                <div class="detalhes">
                    <p><strong>Instru√ß√µes:</strong> Inicie com uma inclina√ß√£o de 4% a 6% e mantenha uma velocidade entre 5‚Äì6 km/h. Mantenha a postura ereta, evitando agarrar-se aos apoios da m√°quina para maximizar o aquecimento e o envolvimento dos m√∫sculos.</p>
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/18/Treadmill_usage.jpg/800px-Treadmill_usage.jpg" alt="Passadeira">
                    <p><a href="https://www.youtube.com/watch?v=k_j1Nq2jW0c" target="_blank">Ver v√≠deo (exemplo)</a></p>
                    <p><strong>Descanso:</strong> N√£o aplic√°vel, √© o aquecimento.</p>
                    <div class="input-group">
                        <label for="passadeira_carga">Carga (Velocidade/Inclina√ß√£o):</label>
                        <input type="text" id="passadeira_carga" value="5km/h, 5%" placeholder="Ex: 5km/h, 5%">
                        <label for="passadeira_feito">Feito:</label>
                        <input type="checkbox" id="passadeira_feito">
                    </div>
                </div>
            </div>

            <div class="exercicio" onclick="toggleDetalhes(this)">
                <h3>Supino reto com halteres <span class="reps">3x12</span></h3>
                <div class="detalhes">
                    <p><strong>Instru√ß√µes:</strong> Deite-se num banco plano, segurando um haltere em cada m√£o. Mantenha os p√©s firmemente no ch√£o e as costas ligeiramente arqueadas para uma base est√°vel. Estique os bra√ßos acima do peito, depois baixe os halteres lentamente at√© aos lados do peito, sem descer al√©m da linha do t√≥rax para proteger os ombros. Suba de forma controlada, focando na contra√ß√£o do peito.</p>
                    <img src="https://www.muscleandstrength.com/sites/default/files/dumbbell-bench-press.jpg" alt="Supino reto com halteres">
                    <p><a href="https://www.youtube.com/watch?v=VmB1G1K8b5w" target="_blank">Ver v√≠deo (exemplo Matrix)</a></p>
                    <p><strong>Descanso entre s√©ries:</strong> 60 segundos</p>
                    <p><strong>Descanso entre exerc√≠cios:</strong> 60-90 segundos</p>
                    <div class="input-group">
                        <label for="supino_reto_halteres_carga">Carga (kg):</label>
                        <input type="number" id="supino_reto_halteres_carga" placeholder="Ex: 10">
                        <label for="supino_reto_halteres_feito">Feito:</label>
                        <input type="checkbox" id="supino_reto_halteres_feito">
                    </div>
                </div>
            </div>

            <div class="exercicio" onclick="toggleDetalhes(this)">
                <h3>Supino inclinado com halteres <span class="reps">3x12</span></h3>
                <div class="detalhes">
                    <p><strong>Instru√ß√µes:</strong> Execute o mesmo movimento do supino reto, mas num banco inclinado a 30¬∞‚Äì45¬∞. √â crucial n√£o for√ßar os ombros excessivamente para tr√°s durante a descida dos halteres. Mantenha o movimento controlado e focado no peito superior.</p>
                    <img src="https://www.muscleandstrength.com/sites/default/files/incline-dumbbell-press.jpg" alt="Supino inclinado com halteres">
                    <p><a href="https://www.youtube.com/watch?v=0G2Y4C919zY" target="_blank">Ver v√≠deo (exemplo Matrix)</a></p>
                    <p><strong>Descanso entre s√©ries:</strong> 60 segundos</p>
                    <p><strong>Descanso entre exerc√≠cios:</strong> 60-90 segundos</p>
                    <div class="input-group">
                        <label for="supino_inclinado_halteres_carga">Carga (kg):</label>
                        <input type="number" id="supino_inclinado_halteres_carga" placeholder="Ex: 8">
                        <label for="supino_inclinado_halteres_feito">Feito:</label>
                        <input type="checkbox" id="supino_inclinado_halteres_feito">
                    </div>
                </div>
            </div>

            <div class="exercicio" onclick="toggleDetalhes(this)">
                <h3>Cross-over em polia baixa <span class="reps">3x15</span></h3>
                <div class="detalhes">
                    <p><strong>Instru√ß√µes:</strong> Posicione as polias na posi√ß√£o mais baixa. Segurando as pegas com uma pega neutra (palmas das m√£os viradas uma para a outra), execute o movimento como se estivesse a abra√ßar algu√©m, unindo as m√£os √† frente do peito. Mantenha os cotovelos ligeiramente dobrados e controle o retorno do movimento para evitar sobrecarregar os ombros.</p>
                    <img src="https://www.muscleandstrength.com/sites/default/files/cable-crossover.jpg" alt="Cross-over em polia baixa">
                    <p><a href="https://www.youtube.com/watch?v=QxX9-w3lC-A" target="_blank">Ver v√≠deo (exemplo Matrix)</a></p>
                    <p><strong>Descanso entre s√©ries:</strong> 45 segundos</p>
                    <p><strong>Descanso entre exerc√≠cios:</strong> 60-90 segundos</p>
                    <div class="input-group">
                        <label for="crossover_polia_baixa_carga">Carga (kg):</label>
                        <input type="number" id="crossover_polia_baixa_carga" placeholder="Ex: 5">
                        <label for="crossover_polia_baixa_feito">Feito:</label>
                        <input type="checkbox" id="crossover_polia_baixa_feito">
                    </div>
                </div>
            </div>

            <div class="exercicio" onclick="toggleDetalhes(this)">
                <h3>Tr√≠ceps no puxador com corda <span class="reps">3x15</span></h3>
                <div class="detalhes">
                    <p><strong>Instru√ß√µes:</strong> Fique de p√©, com as costas direitas e os cotovelos fixos junto ao tronco. Puxe a corda para baixo at√© esticar completamente os bra√ßos, focando na contra√ß√£o do tr√≠ceps. Solte devagar at√© formar um √¢ngulo de 90¬∞ nos cotovelos e repita o movimento.</p>
                    <img src="https://www.muscleandstrength.com/sites/default/files/triceps-rope-pushdown.jpg" alt="Tr√≠ceps no puxador com corda">
                    <p><a href="https://www.youtube.com/watch?v=Fj-0q5GgB24" target="_blank">Ver v√≠deo (exemplo Matrix)</a></p>
                    <p><strong>Descanso entre s√©ries:</strong> 45 segundos</p>
                    <p><strong>Descanso entre exerc√≠cios:</strong> 60-90 segundos</p>
                    <div class="input-group">
                        <label for="triceps_puxador_corda_carga">Carga (kg):</label>
                        <input type="number" id="triceps_puxador_corda_carga" placeholder="Ex: 10">
                        <label for="triceps_puxador_corda_feito">Feito:</label>
                        <input type="checkbox" id="triceps_puxador_corda_feito">
                    </div>
                </div>
            </div>

            <div class="exercicio" onclick="toggleDetalhes(this)">
                <h3>Tr√≠ceps testa com halteres leves <span class="reps">2x12</span></h3>
                <div class="detalhes">
                    <p><strong>Instru√ß√µes:</strong> Sente-se num banco ligeiramente inclinado. Segure um haltere leve em cada m√£o (ou um √∫nico haltere com as duas m√£os). Estique os bra√ßos acima da cabe√ßa, depois baixe os halteres atr√°s da cabe√ßa, mantendo os cotovelos apontados para cima. Estenda os bra√ßos novamente at√© √† posi√ß√£o inicial. Realize o movimento de forma lenta e controlada, focando na extens√£o suave e evitando movimentos bruscos.</p>
                    <img src="https://www.muscleandstrength.com/sites/default/files/dumbbell-overhead-triceps-extension.jpg" alt="Tr√≠ceps testa com halteres leves">
                    <p><a href="https://www.youtube.com/watch?v=sIu9I8Fh63c" target="_blank">Ver v√≠deo (exemplo)</a></p>
                    <p><strong>Descanso entre s√©ries:</strong> 60 segundos</p>
                    <p><strong>Descanso entre exerc√≠cios:</strong> 60-90 segundos</p>
                    <div class="input-group">
                        <label for="triceps_testa_halteres_carga">Carga (kg):</label>
                        <input type="number" id="triceps_testa_halteres_carga" placeholder="Ex: 6">
                        <label for="triceps_testa_halteres_feito">Feito:</label>
                        <input type="checkbox" id="triceps_testa_halteres_feito">
                    </div>
                </div>
            </div>

            <div class="exercicio" onclick="toggleDetalhes(this)">
                <h3>Prancha frontal <span class="reps">3x30 seg</span></h3>
                <div class="detalhes">
                    <p><strong>Instru√ß√µes:</strong> Apoie os antebra√ßos e as pontas dos p√©s no ch√£o. Mantenha o corpo reto, como uma t√°bua, desde a cabe√ßa at√© os calcanhares. N√£o deixe a bacia cair (para baixo) nem subir (para cima). Contraia bem o abd√≥men e os gl√∫teos para manter a estabilidade.</p>
                    <img src="https://www.muscleandstrength.com/sites/default/files/plank.jpg" alt="Prancha frontal">
                    <p><a href="https://www.youtube.com/watch?v=T_e4Q4aHkBA" target="_blank">Ver v√≠deo (exemplo)</a></p>
                    <p><strong>Descanso entre s√©ries:</strong> 30 segundos</p>
                    <p><strong>Descanso entre exerc√≠cios:</strong> 60-90 segundos</p>
                    <div class="input-group">
                        <label for="prancha_frontal_carga">Carga (segundos):</label>
                        <input type="text" id="prancha_frontal_carga" value="30 seg" placeholder="Ex: 30 seg">
                        <label for="prancha_frontal_feito">Feito:</label>
                        <input type="checkbox" id="prancha_frontal_feito">
                    </div>
                </div>
            </div>
        </div>

        <div id="treinoB" class="treino">
            <h2>üí™ Treino B ‚Äì Costas, B√≠ceps, Core + Cardio</h2>
            <div class="exercicio" onclick="toggleDetalhes(this)">
                <h3>Remo (cardio) <span class="reps">10-12 min</span></h3>
                <div class="detalhes">
                    <p><strong>Instru√ß√µes:</strong> Utilize a m√°quina de remo com um ritmo moderado. Comece por empurrar com as pernas, s√≥ depois puxe com os bra√ßos. Mantenha as costas direitas e evite deitar-se demasiado para tr√°s. O movimento deve ser fluido e controlado, priorizando a for√ßa das pernas e core.</p>
                    <img src="https://www.muscleandstrength.com/sites/default/files/rowing-machine.jpg" alt="Remo">
                    <p><a href="https://www.youtube.com/watch?v=A3sP-h98cXs" target="_blank">Ver v√≠deo (exemplo Matrix)</a></p>
                    <p><strong>Descanso:</strong> N√£o aplic√°vel, √© o aquecimento.</p>
                    <div class="input-group">
                        <label for="remo_carga">Carga (N√≠vel):</label>
                        <input type="text" id="remo_carga" value="N√≠vel 5" placeholder="Ex: N√≠vel 5">
                        <label for="remo_feito">Feito:</label>
                        <input type="checkbox" id="remo_feito">
                    </div>
                </div>
            </div>

            <div class="exercicio" onclick="toggleDetalhes(this)">
                <h3>Puxada frente (pegada neutra) <span class="reps">3x12</span></h3>
                <div class="detalhes">
                    <p><strong>Instru√ß√µes:</strong> Sente-se na m√°quina com as m√£os numa posi√ß√£o neutra (palmas viradas uma para a outra). Puxe a barra at√© ao queixo ou peito, mantendo os cotovelos a apontar para baixo. Suba a barra lentamente, sem balan√ßar o tronco, focando na contra√ß√£o das costas (grande dorsal).</p>
                    <img src="https://www.muscleandstrength.com/sites/default/files/lat-pulldown.jpg" alt="Puxada frente (pegada neutra)">
                    <p><a href="https://www.youtube.com/watch?v=yYmI-aXkP3Q" target="_blank">Ver v√≠deo (exemplo Matrix)</a></p>
                    <p><strong>Descanso entre s√©ries:</strong> 60 segundos</p>
                    <p><strong>Descanso entre exerc√≠cios:</strong> 60-90 segundos</p>
                    <div class="input-group">
                        <label for="puxada_frente_carga">Carga (kg):</label>
                        <input type="number" id="puxada_frente_carga" placeholder="Ex: 30">
                        <label for="puxada_frente_feito">Feito:</label>
                        <input type="checkbox" id="puxada_frente_feito">
                    </div>
                </div>
            </div>

            <div class="exercicio" onclick="toggleDetalhes(this)">
                <h3>Remada baixa com tri√¢ngulo <span class="reps">3x12</span></h3>
                <div class="detalhes">
                    <p><strong>Instru√ß√µes:</strong> Sente-se na m√°quina de remada baixa com as costas direitas. Puxe o punho em tri√¢ngulo at√© ao umbigo, mantendo os cotovelos juntos ao corpo. Retorne √† posi√ß√£o inicial devagar, controlando o movimento e esticando bem as costas sem arredondar a lombar.</p>
                    <img src="https://www.muscleandstrength.com/sites/default/files/seated-cable-row.jpg" alt="Remada baixa com tri√¢ngulo">
                    <p><a href="https://www.youtube.com/watch?v=0hY4j717v2k" target="_blank">Ver v√≠deo (exemplo Matrix)</a></p>
                    <p><strong>Descanso entre s√©ries:</strong> 60 segundos</p>
                    <p><strong>Descanso entre exerc√≠cios:</strong> 60-90 segundos</p>
                    <div class="input-group">
                        <label for="remada_baixa_carga">Carga (kg):</label>
                        <input type="number" id="remada_baixa_carga" placeholder="Ex: 25">
                        <label for="remada_baixa_feito">Feito:</label>
                        <input type="checkbox" id="remada_baixa_feito">
                    </div>
                </div>
            </div>

            <div class="exercicio" onclick="toggleDetalhes(this)">
                <h3>Remada unilateral com haltere no banco <span class="reps">3x12 por lado</span></h3>
                <div class="detalhes">
                    <p><strong>Instru√ß√µes:</strong> Apoie um joelho e a m√£o oposta num banco plano. Com a outra m√£o, puxe o haltere do ch√£o at√© ao lado do peito, mantendo o cotovelo rente ao corpo. Evite rodar o tronco e foque na contra√ß√£o da parte superior das costas. Realize para ambos os lados.</p>
                    <img src="https://www.muscleandstrength.com/sites/default/files/dumbbell-row.jpg" alt="Remada unilateral com haltere no banco">
                    <p><a href="https://www.youtube.com/watch?v=roW9lq-gq40" target="_blank">Ver v√≠deo (exemplo)</a></p>
                    <p><strong>Descanso entre s√©ries:</strong> 60 segundos</p>
                    <p><strong>Descanso entre exerc√≠cios:</strong> 60-90 segundos</p>
                    <div class="input-group">
                        <label for="remada_unilateral_carga">Carga (kg):</label>
                        <input type="number" id="remada_unilateral_carga" placeholder="Ex: 8">
                        <label for="remada_unilateral_feito">Feito:</label>
                        <input type="checkbox" id="remada_unilateral_feito">
                    </div>
                </div>
            </div>

            <div class="exercicio" onclick="toggleDetalhes(this)">
                <h3>B√≠ceps alternado com halteres leves <span class="reps">3x15</span></h3>
                <div class="detalhes">
                    <p><strong>Instru√ß√µes:</strong> Fique de p√©, com os halteres ao lado do corpo, palmas viradas para a frente. Suba um haltere de cada vez at√© ao ombro, rodando a palma da m√£o para cima √† medida que sobe. N√£o balance o corpo; o movimento deve ser controlado e focado no b√≠ceps.</p>
                    <img src="https://www.muscleandstrength.com/sites/default/files/alternating-dumbbell-curl.jpg" alt="B√≠ceps alternado com halteres leves">
                    <p><a href="https://www.youtube.com/watch?v=y2sI6jJd25s" target="_blank">Ver v√≠deo (exemplo)</a></p>
                    <p><strong>Descanso entre s√©ries:</strong> 45 segundos</p>
                    <p><strong>Descanso entre exerc√≠cios:</strong> 60-90 segundos</p>
                    <div class="input-group">
                        <label for="biceps_alternado_carga">Carga (kg):</label>
                        <input type="number" id="biceps_alternado_carga" placeholder="Ex: 5">
                        <label for="biceps_alternado_feito">Feito:</label>
                        <input type="checkbox" id="biceps_alternado_feito">
                    </div>
                </div>
            </div>

            <div class="exercicio" onclick="toggleDetalhes(this)">
                <h3>B√≠ceps banco inclinado <span class="reps">2x12</span></h3>
                <div class="detalhes">
                    <p><strong>Instru√ß√µes:</strong> Sente-se num banco inclinado com um haltere em cada m√£o, bra√ßos esticados para baixo. Suba os halteres de forma controlada, focando na contra√ß√£o do b√≠ceps. Deixe os bra√ßos descerem completamente na fase negativa e nunca balance os pesos para ajudar no movimento.</p>
                    <img src="https://www.muscleandstrength.com/sites/default/files/incline-dumbbell-curl.jpg" alt="B√≠ceps banco inclinado">
                    <p><a href="https://www.youtube.com/watch?v=F2YmF_XoP-M" target="_blank">Ver v√≠deo (exemplo)</a></p>
                    <p><strong>Descanso entre s√©ries:</strong> 60 segundos</p>
                    <p><strong>Descanso entre exerc√≠cios:</strong> 60-90 segundos</p>
                    <div class="input-group">
                        <label for="biceps_banco_inclinado_carga">Carga (kg):</label>
                        <input type="number" id="biceps_banco_inclinado_carga" placeholder="Ex: 4">
                        <label for="biceps_banco_inclinado_feito">Feito:</label>
                        <input type="checkbox" id="biceps_banco_inclinado_feito">
                    </div>
                </div>
            </div>

            <div class="exercicio" onclick="toggleDetalhes(this)">
                <h3>Prancha lateral (direita/esquerda) <span class="reps">2x30 seg por lado</span></h3>
                <div class="detalhes">
                    <p><strong>Instru√ß√µes:</strong> Apoie o antebra√ßo no ch√£o e mantenha o corpo reto e alinhado de lado. Levante a bacia e segure a posi√ß√£o, certificando-se de que o ombro est√° alinhado com o cotovelo. Se necess√°rio, pode apoiar os joelhos no ch√£o para facilitar. Troque de lado ap√≥s o tempo indicado.</p>
                    <img src="https://www.muscleandstrength.com/sites/default/files/side-plank.jpg" alt="Prancha lateral">
                    <p><a href="https://www.youtube.com/watch?v=gJ9iYjD_NqE" target="_blank">Ver v√≠deo (exemplo)</a></p>
                    <p><strong>Descanso entre s√©ries:</strong> 30 segundos</p>
                    <p><strong>Descanso entre exerc√≠cios:</strong> 60-90 segundos</p>
                    <div class="input-group">
                        <label for="prancha_lateral_carga">Carga (segundos):</label>
                        <input type="text" id="prancha_lateral_carga" value="30 seg" placeholder="Ex: 30 seg">
                        <label for="prancha_lateral_feito">Feito:</label>
                        <input type="checkbox" id="prancha_lateral_feito">
                    </div>
                </div>
            </div>
        </div>

        <div id="treinoC" class="treino">
            <h2>üí™ Treino C ‚Äì Pernas, Ombros (com cuidado), Core + Cardio</h2>
            <div class="exercicio" onclick="toggleDetalhes(this)">
                <h3>El√≠ptica <span class="reps">12‚Äì15 min</span></h3>
                <div class="detalhes">
                    <p><strong>Instru√ß√µes:</strong> Utilize a m√°quina el√≠ptica com um movimento fluido e suave, sem impacto nos joelhos. Concentre-se na respira√ß√£o e mantenha um ritmo constante para um aquecimento eficaz e queima de calorias.</p>
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e0/Woman_on_cross-trainer.jpg/800px-Woman_on_cross-trainer.jpg" alt="El√≠ptica">
                    <p><a href="https://www.youtube.com/watch?v=t-q5xJ9i68U" target="_blank">Ver v√≠deo (exemplo)</a></p>
                    <p><strong>Descanso:</strong> N√£o aplic√°vel, √© o aquecimento.</p>
                    <div class="input-group">
                        <label for="eliptica_carga">Carga (N√≠vel):</label>
                        <input type="text" id="eliptica_carga" value="N√≠vel 6" placeholder="Ex: N√≠vel 6">
                        <label for="eliptica_feito">Feito:</label>
                        <input type="checkbox" id="eliptica_feito">
                    </div>
                </div>
            </div>

            <div class="exercicio" onclick="toggleDetalhes(this)">
                <h3>Agachamento com peso corporal <span class="reps">3x15</span></h3>
                <div class="detalhes">
                    <p><strong>Instru√ß√µes:</strong> Posicione os p√©s √† largura dos ombros. Des√ßa como se fosse sentar numa cadeira, garantindo que os joelhos n√£o ultrapassam a linha dos p√©s. Mantenha as costas direitas e o peito para cima. Pode usar um haltere leve ao peito para evoluir, mas comece sem barra para aperfei√ßoar a t√©cnica.</p>
                    <img src="https://www.muscleandstrength.com/sites/default/files/bodyweight-squat.jpg" alt="Agachamento com peso corporal">
                    <p><a href="https://www.youtube.com/watch?v=ultWtk1Nl8g" target="_blank">Ver v√≠deo (exemplo)</a></p>
                    <p><strong>Descanso entre s√©ries:</strong> 60 segundos</p>
                    <p><strong>Descanso entre exerc√≠cios:</strong> 60-90 segundos</p>
                    <div class="input-group">
                        <label for="agachamento_peso_corporal_carga">Carga (kg):</label>
                        <input type="text" id="agachamento_peso_corporal_carga" value="Peso Corporal" placeholder="Ex: Peso Corporal">
                        <label for="agachamento_peso_corporal_feito">Feito:</label>
                        <input type="checkbox" id="agachamento_peso_corporal_feito">
                    </div>
                </div>
            </div>

            <div class="exercicio" onclick="toggleDetalhes(this)">
                <h3>Leg Press (45¬∫) <span class="reps">3x12</span></h3>
                <div class="detalhes">
                    <p><strong>Instru√ß√µes:</strong> Sente-se na m√°quina com os p√©s afastados na plataforma. Empurre a plataforma sem estender totalmente os joelhos no final do movimento para proteger a articula√ß√£o. Des√ßa at√© formar um √¢ngulo de 90¬∫ nos joelhos. Mantenha o movimento lento e controlado.</p>
                    <img src="https://www.muscleandstrength.com/sites/default/files/leg-press.jpg" alt="Leg Press (45¬∫)">
                    <p><a href="https://www.youtube.com/watch?v=W45N-4K20m8" target="_blank">Ver v√≠deo (exemplo Matrix)</a></p>
                    <p><strong>Descanso entre s√©ries:</strong> 60 segundos</p>
                    <p><strong>Descanso entre exerc√≠cios:</strong> 60-90 segundos</p>
                    <div class="input-group">
                        <label for="leg_press_carga">Carga (kg):</label>
                        <input type="number" id="leg_press_carga" placeholder="Ex: 50">
                        <label for="leg_press_feito">Feito:</label>
                        <input type="checkbox" id="leg_press_feito">
                    </div>
                </div>
            </div>

            <div class="exercicio" onclick="toggleDetalhes(this)">
                <h3>Extensora (quadr√≠ceps) <span class="reps">3x15</span></h3>
                <div class="detalhes">
                    <p><strong>Instru√ß√µes:</strong> Sente-se na m√°quina e ajuste o rolo na altura dos tornozelos. Estique as pernas at√© quase trancar os joelhos (sem for√ßar a hiperextens√£o). Retorne √† posi√ß√£o inicial devagar, controlando o movimento, focando na contra√ß√£o do quadr√≠ceps.</p>
                    <img src="https://www.muscleandstrength.com/sites/default/files/leg-extension.jpg" alt="Extensora (quadr√≠ceps)">
                    <p><a href="https://www.youtube.com/watch?v=YyvMnX2L56c" target="_blank">Ver v√≠deo (exemplo Matrix)</a></p>
                    <p><strong>Descanso entre s√©ries:</strong> 45 segundos</p>
                    <p><strong>Descanso entre exerc√≠cios:</strong> 60-90 segundos</p>
                    <div class="input-group">
                        <label for="extensora_carga">Carga (kg):</label>
                        <input type="number" id="extensora_carga" placeholder="Ex: 20">
                        <label for="extensora_feito">Feito:</label>
                        <input type="checkbox" id="extensora_feito">
                    </div>
                </div>
            </div>

            <div class="exercicio" onclick="toggleDetalhes(this)">
                <h3>Flexora (posterior da coxa) <span class="reps">3x15</span></h3>
                <div class="detalhes">
                    <p><strong>Instru√ß√µes:</strong> Pode ser feito sentado ou deitado, dependendo da m√°quina dispon√≠vel. Puxe o rolo para tr√°s at√© formar um √¢ngulo de 90¬∫ com controlo. Sinta a contra√ß√£o nos isquiotibiais (parte de tr√°s da coxa) e retorne √† posi√ß√£o inicial de forma lenta e controlada.</p>
                    <img src="https://www.muscleandstrength.com/sites/default/files/leg-curl.jpg" alt="Flexora (posterior da coxa)">
                    <p><a href="https://www.youtube.com/watch?v=F4L1vQdK9oY" target="_blank">Ver v√≠deo (exemplo Matrix)</a></p>
                    <p><strong>Descanso entre s√©ries:</strong> 45 segundos</p>
                    <p><strong>Descanso entre exerc√≠cios:</strong> 60-90 segundos</p>
                    <div class="input-group">
                        <label for="flexora_carga">Carga (kg):</label>
                        <input type="number" id="flexora_carga" placeholder="Ex: 15">
                        <label for="flexora_feito">Feito:</label>
                        <input type="checkbox" id="flexora_feito">
                    </div>
                </div>
            </div>

            <div class="exercicio" onclick="toggleDetalhes(this)">
                <h3>Ombros: Press com halteres sentado <span class="reps">3x12</span></h3>
                <div class="detalhes">
                    <p><strong>Instru√ß√µes:</strong> Sente-se com um banco de costas retas, segurando um haltere leve em cada m√£o √† altura dos ombros, palmas viradas para a frente. Suba os halteres at√© esticar os bra√ßos sem for√ßar a articula√ß√£o. Des√ßa de forma controlada. Evite usar barra para proteger os ombros, usando halteres leves com controlo total.</p>
                    <img src="https://www.muscleandstrength.com/sites/default/files/seated-dumbbell-shoulder-press.jpg" alt="Press ombro com halteres sentado">
                    <p><a href="https://www.youtube.com/watch?v=qEwKCR5JCms" target="_blank">Ver v√≠deo (exemplo)</a></p>
                    <p><strong>Descanso entre s√©ries:</strong> 60 segundos</p>
                    <p><strong>Descanso entre exerc√≠cios:</strong> 60-90 segundos</p>
                    <div class="input-group">
                        <label for="press_ombro_halteres_carga">Carga (kg):</label>
                        <input type="number" id="press_ombro_halteres_carga" placeholder="Ex: 6">
                        <label for="press_ombro_halteres_feito">Feito:</label>
                        <input type="checkbox" id="press_ombro_halteres_feito">
                    </div>
                </div>
            </div>

            <div class="exercicio" onclick="toggleDetalhes(this)">
                <h3>Eleva√ß√µes laterais com halteres leves <span class="reps">3x12</span></h3>
                <div class="detalhes">
                    <p><strong>Instru√ß√µes:</strong> Em p√©, com um haltere leve em cada m√£o e os bra√ßos ligeiramente dobrados. Suba os halteres lateralmente at√© √† altura dos ombros, mantendo um movimento controlado. Evite encolher os ombros ou usar o impulso do corpo. Foque-se nos deltoides laterais.</p>
                    <img src="https://www.muscleandstrength.com/sites/default/files/dumbbell-lateral-raises.jpg" alt="Eleva√ß√µes laterais com halteres leves">
                    <p><a href="https://www.youtube.com/watch?v=3VcKaXfVDFI" target="_blank">Ver v√≠deo (exemplo)</a></p>
                    <p><strong>Descanso entre s√©ries:</strong> 60 segundos</p>
                    <p><strong>Descanso entre exerc√≠cios:</strong> 60-90 segundos</p>
                    <div class="input-group">
                        <label for="elevacoes_laterais_carga">Carga (kg):</label>
                        <input type="number" id="elevacoes_laterais_carga" placeholder="Ex: 3">
                        <label for="elevacoes_laterais_feito">Feito:</label>
                        <input type="checkbox" id="elevacoes_laterais_feito">
                    </div>
                </div>
            </div>

            <div class="exercicio" onclick="toggleDetalhes(this)">
                <h3>Abdominais bicicleta <span class="reps">3x20</span></h3>
                <div class="detalhes">
                    <p><strong>Instru√ß√µes:</strong> Deite-se de costas, m√£os atr√°s da cabe√ßa, pernas elevadas e joelhos dobrados. Traga o cotovelo direito em dire√ß√£o ao joelho esquerdo, enquanto estende a perna direita. Alterne os lados, simulando o movimento de pedalar numa bicicleta. Mantenha o movimento controlado, sem stress na cervical.</p>
                    <img src="https://www.muscleandstrength.com/sites/default/files/bicycle-crunches.jpg" alt="Abdominais bicicleta">
                    <p><a href="https://www.youtube.com/watch?v=9FGilxCbdz8" target="_blank">Ver v√≠deo (exemplo)</a></p>
                    <p><strong>Descanso entre s√©ries:</strong> 30 segundos</p>
                    <p><strong>Descanso entre exerc√≠cios:</strong> 60-90 segundos</p>
                    <div class="input-group">
                        <label for="abdominais_bicicleta_carga">Carga (reps):</label>
                        <input type="text" id="abdominais_bicicleta_carga" value="20" placeholder="Ex: 20">
                        <label for="abdominais_bicicleta_feito">Feito:</label>
                        <input type="checkbox" id="abdominais_bicicleta_feito">
                    </div>
                </div>
            </div>
        </div>

        <div id="treinoD" class="treino">
            <h2>üí™ Treino D (Extra) ‚Äì Funcional leve + Core + Mobilidade</h2>
            <div class="exercicio" onclick="toggleDetalhes(this)">
                <h3>Bicicleta est√°tica ou caminhada r√°pida <span class="reps">10 min</span></h3>
                <div class="detalhes">
                    <p><strong>Instru√ß√µes:</strong> Utilize uma bicicleta est√°tica ou fa√ßa uma caminhada r√°pida na passadeira. Mantenha um ritmo moderado para aquecer o corpo e aumentar a frequ√™ncia card√≠aca de forma suave, preparando-se para os exerc√≠cios funcionais.</p>
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c9/Stationary_bicycle_at_gym.jpg/800px-Stationary_bicycle_at_gym.jpg" alt="Bicicleta est√°tica">
                    <p><a href="https://www.youtube.com/watch?v=F01y5m21zQY" target="_blank">Ver v√≠deo (exemplo bicicleta)</a></p>
                    <p><strong>Descanso:</strong> N√£o aplic√°vel, √© o aquecimento.</p>
                    <div class="input-group">
                        <label for="bicicleta_estatica_carga">Carga (N√≠vel/Velocidade):</label>
                        <input type="text" id="bicicleta_estatica_carga" value="N√≠vel 7" placeholder="Ex: N√≠vel 7">
                        <label for="bicicleta_estatica_feito">Feito:</label>
                        <input type="checkbox" id="bicicleta_estatica_feito">
                    </div>
                </div>
            </div>

            <div class="exercicio" onclick="toggleDetalhes(this)">
                <h3>Agachamento + Press com halteres leves <span class="reps">3x12</span></h3>
                <div class="detalhes">
                    <p><strong>Instru√ß√µes:</strong> Segure halteres leves em cada m√£o. Realize um agachamento e, ao subir, estique os halteres acima da cabe√ßa em um movimento de press. Este exerc√≠cio combina trabalho de pernas e ombros de forma funcional, melhorando a coordena√ß√£o e a for√ßa global. Mantenha o movimento fluido e controlado.</p>
                    <img src="https://www.muscleandstrength.com/sites/default/files/dumbbell-thruster.jpg" alt="Agachamento + Press com halteres leves">
                    <p><a href="https://www.youtube.com/watch?v=Y-0hK6c1XgM" target="_blank">Ver v√≠deo (exemplo)</a></p>
                    <p><strong>Descanso entre s√©ries:</strong> 60 segundos</p>
                    <p><strong>Descanso entre exerc√≠cios:</strong> 60-90 segundos</p>
                    <div class="input-group">
                        <label for="agachamento_press_carga">Carga (kg):</label>
                        <input type="number" id="agachamento_press_carga" placeholder="Ex: 4">
                        <label for="agachamento_press_feito">Feito:</label>
                        <input type="checkbox" id="agachamento_press_feito">
                    </div>
                </div>
            </div>

            <div class="exercicio" onclick="toggleDetalhes(this)">
                <h3>Peso morto com kettlebell leve <span class="reps">3x12</span></h3>
                <div class="detalhes">
                    <p><strong>Instru√ß√µes:</strong> Fique de p√© com os p√©s √† largura dos ombros e um kettlebell leve entre os p√©s. Dobre a anca, mantendo as costas retas e o peito para cima, descendo o kettlebell em dire√ß√£o ao ch√£o. Sinta o alongamento nos gl√∫teos e isquiotibiais. Suba contraindo os gl√∫teos e estendendo a anca. O foco est√° na t√©cnica correta para ativar o gl√∫teo e a lombar de forma segura.</p>
                    <img src="https://www.muscleandstrength.com/sites/default/files/kettlebell-deadlift.jpg" alt="Peso morto com kettlebell leve">
                    <p><a href="https://www.youtube.com/watch?v=F0I6t46522k" target="_blank">Ver v√≠deo (exemplo)</a></p>
                    <p><strong>Descanso entre s√©ries:</strong> 60 segundos</p>
                    <p><strong>Descanso entre exerc√≠cios:</strong> 60-90 segundos</p>
                    <div class="input-group">
                        <label for="peso_morto_kettlebell_carga">Carga (kg):</label>
                        <input type="number" id="peso_morto_kettlebell_carga" placeholder="Ex: 8">
                        <label for="peso_morto_kettlebell_feito">Feito:</label>
                        <input type="checkbox" id="peso_morto_kettlebell_feito">
                    </div>
                </div>
            </div>

            <div class="exercicio" onclick="toggleDetalhes(this)">
                <h3>Bird Dog (equil√≠brio e core) <span class="reps">3x10 por lado</span></h3>
                <div class="detalhes">
                    <p><strong>Instru√ß√µes:</strong> Comece na posi√ß√£o de quatro apoios (m√£os e joelhos no ch√£o). Estique o bra√ßo direito para a frente e a perna esquerda para tr√°s simultaneamente, mantendo o corpo est√°vel e o core contra√≠do. Mantenha a posi√ß√£o por um segundo e retorne. Alterne os lados. Este exerc√≠cio √© excelente para equil√≠brio e estabilidade do core.</p>
                    <img src="https://www.muscleandstrength.com/sites/default/files/bird-dog.jpg" alt="Bird Dog">
                    <p><a href="https://www.youtube.com/watch?v=nm1_cTqL26Q" target="_blank">Ver v√≠deo (exemplo)</a></p>
                    <p><strong>Descanso entre s√©ries:</strong> 30 segundos</p>
                    <p><strong>Descanso entre exerc√≠cios:</strong> 60-90 segundos</p>
                    <div class="input-group">
                        <label for="bird_dog_carga">Carga (reps):</label>
                        <input type="text" id="bird_dog_carga" value="10" placeholder="Ex: 10">
                        <label for="bird_dog_feito">Feito:</label>
                        <input type="checkbox" id="bird_dog_feito">
                    </div>
                </div>
            </div>

            <div class="exercicio" onclick="toggleDetalhes(this)">
                <h3>Eleva√ß√µes frontais com halteres <span class="reps">2x12</span></h3>
                <div class="detalhes">
                    <p><strong>Instru√ß√µes:</strong> Em p√©, com um haltere leve em cada m√£o, com as palmas viradas para o corpo. Levante os halteres para a frente at√© √† altura dos ombros, sem ultrapassar essa linha. Mantenha o movimento controlado, sem usar balan√ßo, focando nos deltoides frontais. Este exerc√≠cio √© feito com carga leve para proteger os ombros.</p>
                    <img src="https://www.muscleandstrength.com/sites/default/files/dumbbell-front-raises.jpg" alt="Eleva√ß√µes frontais com halteres">
                    <p><a href="https://www.youtube.com/watch?v=J_jQ7V7c93A" target="_blank">Ver v√≠deo (exemplo)</a></p>
                    <p><strong>Descanso entre s√©ries:</strong> 45 segundos</p>
                    <p><strong>Descanso entre exerc√≠cios:</strong> 60-90 segundos</p>
                    <div class="input-group">
                        <label for="elevacoes_frontais_carga">Carga (kg):</label>
                        <input type="number" id="elevacoes_frontais_carga" placeholder="Ex: 2">
                        <label for="elevacoes_frontais_feito">Feito:</label>
                        <input type="checkbox" id="elevacoes_frontais_feito">
                    </div>
                </div>
            </div>

            <div class="exercicio" onclick="toggleDetalhes(this)">
                <h3>Alongamentos + respira√ß√£o <span class="reps">5‚Äì10 min</span></h3>
                <div class="detalhes">
                    <p><strong>Instru√ß√µes:</strong> Termine o treino com 5 a 10 minutos de alongamentos suaves, focando nas costas, ombros e parte posterior da coxa. Mantenha cada alongamento por 20-30 segundos, respirando profundamente. Isso ajuda na recupera√ß√£o muscular e na preven√ß√£o de les√µes, especialmente importante com hist√≥rico de tendinite.</p>
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c2/Hamstring_Stretch_01.jpg/800px-Hamstring_Stretch_01.jpg" alt="Alongamentos">
                    <p><a href="https://www.youtube.com/watch?v=0hXgQ3562n8" target="_blank">Ver v√≠deo (exemplo)</a></p>
                    <p><strong>Descanso:</strong> N√£o aplic√°vel.</p>
                    <div class="input-group">
                        <label for="alongamentos_carga">Carga (Tempo):</label>
                        <input type="text" id="alongamentos_carga" value="5-10 min" placeholder="Ex: 5-10 min">
                        <label for="alongamentos_feito">Feito:</label>
                        <input type="checkbox" id="alongamentos_feito">
                    </div>
                </div>
            </div>
        </div>
        
        <button class="finalizar-btn" onclick="finalizarTreino()">Finalizar Treino e Guardar</button>
        <button class="history-btn" onclick="openHistoryModal()">Ver Hist√≥rico</button>
        <button class="export-btn" onclick="exportToCsv()">Exportar Dados CSV</button>
        <button class="notification-btn" onclick="requestNotificationPermission()">Ativar Notifica√ß√µes</button>
    </main>

    <div id="history-modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeHistoryModal()">&times;</span>
            <h2>Hist√≥rico de Treino</h2>
            <div id="history-list">
                </div>
        </div>
    </div>

    <audio id="beep-sound" src="https://www.soundjay.com/buttons/sounds/beep-07.mp3" preload="auto"></audio>

    <script>
        // Service Worker para PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(registration => {
                        console.log('ServiceWorker registado com sucesso:', registration.scope);
                    })
                    .catch(error => {
                        console.log('Registo do ServiceWorker falhou:', error);
                    });
            });
        }
        
        const beepSound = document.getElementById('beep-sound');
        let currentTimer = null;

        function mostrar(id) {
            const treino = document.getElementById(id);
            if (!treino) {
                console.error('Elemento com id ' + id + ' n√£o encontrado.');
                return;
            }
            const treinos = document.querySelectorAll('.treino');
            treinos.forEach(t => {
                t.style.display = 'none';
            });
            treino.style.display = 'block';
            loadExerciseStates(id); // Carrega os estados para o treino vis√≠vel
        }

        function toggleDetalhes(el) {
            const detalhes = el.querySelector('.detalhes');
            const exercicioElement = el; // O elemento clicado √© o pr√≥prio exerc√≠cio

            if (detalhes.style.display === 'block') {
                detalhes.style.display = 'none';
            } else {
                detalhes.style.display = 'block';
                // Define um temporizador para o som de descanso se o descanso entre s√©ries for especificado
                const descansoText = detalhes.querySelector('p:nth-of-type(3)'); // Assume que o 3¬∫ p √© o descanso
                if (descansoText && descansoText.textContent.includes('Descanso entre s√©ries:')) {
                    const descansoValue = parseInt(descansoText.textContent.match(/\d+/)[0]);
                    if (!isNaN(descansoValue) && descansoValue > 0) {
                        if (currentTimer) clearTimeout(currentTimer); // Limpa timer anterior
                        currentTimer = setTimeout(() => {
                            beepSound.play();
                            alert('Descanso terminado! Pr√≥xima s√©rie ou exerc√≠cio.');
                        }, descansoValue * 1000);
                    }
                }
            }
        }

        // Mostrar treino A automaticamente quando a p√°gina carrega
        window.addEventListener('DOMContentLoaded', () => {
            mostrar('treinoA');
            // Inicializar estados dos exerc√≠cios para todos os treinos ao carregar
            document.querySelectorAll('.treino').forEach(treinoDiv => {
                const treinoId = treinoDiv.id;
                loadExerciseStates(treinoId);
            });
        });

        // Adicionar event listeners para inputs de carga e checkboxes
        document.querySelectorAll('.exercicio input[type="number"], .exercicio input[type="text"], .exercicio input[type="checkbox"]').forEach(input => {
            input.addEventListener('change', (event) => {
                event.stopPropagation(); // Previne que o clique no input feche os detalhes
                const exercicioElement = input.closest('.exercicio');
                const treinoId = exercicioElement.closest('.treino').id;
                saveExerciseState(treinoId, exercicioElement);
                updateDoneClass(exercicioElement);
            });
            input.addEventListener('click', (event) => {
                event.stopPropagation(); // Previne que o clique no input feche os detalhes
            });
        });

        // Valida√ß√£o de inputs de carga
        document.querySelectorAll('.exercicio input[type="number"]').forEach(input => {
            input.addEventListener('input', (event) => {
                event.target.value = event.target.value.replace(/[^0-9.]/g, ''); // Permite apenas n√∫meros e um ponto
            });
        });

        function saveExerciseState(treinoId, exercicioElement) {
            const id = exercicioElement.querySelector('h3').textContent.split('<span')[0].trim();
            const cargaInput = exercicioElement.querySelector('input[type="number"]') || exercicioElement.querySelector('input[type="text"]');
            const feitoCheckbox = exercicioElement.querySelector('input[type="checkbox"]');

            const state = {
                carga: cargaInput ? cargaInput.value : '',
                feito: feitoCheckbox ? feitoCheckbox.checked : false
            };

            let treinoStates = JSON.parse(localStorage.getItem('treinoStates')) || {};
            if (!treinoStates[treinoId]) {
                treinoStates[treinoId] = {};
            }
            treinoStates[treinoId][id] = state;
            localStorage.setItem('treinoStates', JSON.stringify(treinoStates));
        }

        function loadExerciseStates(treinoId) {
            const treinoStates = JSON.parse(localStorage.getItem('treinoStates')) || {};
            const currentTreinoStates = treinoStates[treinoId] || {};

            document.querySelectorAll(`#${treinoId} .exercicio`).forEach(exercicioElement => {
                const id = exercicioElement.querySelector('h3').textContent.split('<span')[0].trim();
                const cargaInput = exercicioElement.querySelector('input[type="number"]') || exercicioElement.querySelector('input[type="text"]');
                const feitoCheckbox = exercicioElement.querySelector('input[type="checkbox"]');

                if (currentTreinoStates[id]) {
                    if (cargaInput) cargaInput.value = currentTreinoStates[id].carga;
                    if (feitoCheckbox) feitoCheckbox.checked = currentTreinoStates[id].feito;
                } else {
                    // Se n√£o h√° estado salvo, redefinir para o valor padr√£o ou vazio
                    if (cargaInput) {
                        if (id === 'Passadeira (marcha inclinada)') cargaInput.value = '5km/h, 5%';
                        else if (id === 'Remo (cardio)') cargaInput.value = 'N√≠vel 5';
                        else if (id === 'El√≠ptica') cargaInput.value = 'N√≠vel 6';
                        else if (id === 'Bicicleta est√°tica ou caminhada r√°pida') cargaInput.value = 'N√≠vel 7';
                        else if (id === 'Agachamento com peso corporal') cargaInput.value = 'Peso Corporal';
                        else if (id === 'Prancha frontal') cargaInput.value = '30 seg';
                        else if (id === 'Prancha lateral (direita/esquerda)') cargaInput.value = '30 seg';
                        else if (id === 'Abdominais bicicleta') cargaInput.value = '20';
                        else if (id === 'Bird Dog (equil√≠brio e core)') cargaInput.value = '10';
                        else if (id === 'Alongamentos + respira√ß√£o') cargaInput.value = '5-10 min';
                        else cargaInput.value = '';
                    }
                    if (feitoCheckbox) feitoCheckbox.checked = false;
                }
                updateDoneClass(exercicioElement);
            });
        }

        function updateDoneClass(exercicioElement) {
            const feitoCheckbox = exercicioElement.querySelector('input[type="checkbox"]');
            if (feitoCheckbox && feitoCheckbox.checked) {
                exercicioElement.classList.add('feito');
            } else {
                exercicioElement.classList.remove('feito');
            }
        }

        function finalizarTreino() {
            const activeTreinoId = document.querySelector('.treino[style*="block"]').id;
            const exercisesData = [];
            document.querySelectorAll(`#${activeTreinoId} .exercicio`).forEach(exercicioElement => {
                const name = exercicioElement.querySelector('h3').textContent.split('<span')[0].trim();
                const cargaInput = exercicioElement.querySelector('input[type="number"]') || exercicioElement.querySelector('input[type="text"]');
                const feitoCheckbox = exercicioElement.querySelector('input[type="checkbox"]');

                exercisesData.push({
                    name: name,
                    carga: cargaInput ? cargaInput.value : '',
                    feito: feitoCheckbox ? feitoCheckbox.checked : false
                });
            });

            const history = JSON.parse(localStorage.getItem('treinoHistory')) || [];
            history.push({
                date: new Date().toLocaleString('pt-PT'),
                treinoId: activeTreinoId,
                exercises: exercisesData
            });
            localStorage.setItem('treinoHistory', JSON.stringify(history));

            alert('Treino finalizado e guardado no hist√≥rico!');
            resetCurrentTreino(activeTreinoId); // Limpa os campos ap√≥s finalizar
        }

        function resetCurrentTreino(treinoId) {
            document.querySelectorAll(`#${treinoId} .exercicio`).forEach(exercicioElement => {
                const cargaInput = exercicioElement.querySelector('input[type="number"]') || exercicioElement.querySelector('input[type="text"]');
                const feitoCheckbox = exercicioElement.querySelector('input[type="checkbox"]');
                if (cargaInput) {
                    const id = exercicioElement.querySelector('h3').textContent.split('<span')[0].trim();
                    if (id === 'Passadeira (marcha inclinada)') cargaInput.value = '5km/h, 5%';
                    else if (id === 'Remo (cardio)') cargaInput.value = 'N√≠vel 5';
                    else if (id === 'El√≠ptica') cargaInput.value = 'N√≠vel 6';
                    else if (id === 'Bicicleta est√°tica ou caminhada r√°pida') cargaInput.value = 'N√≠vel 7';
                    else if (id === 'Agachamento com peso corporal') cargaInput.value = 'Peso Corporal';
                    else if (id === 'Prancha frontal') cargaInput.value = '30 seg';
                    else if (id === 'Prancha lateral (direita/esquerda)') cargaInput.value = '30 seg';
                    else if (id === 'Abdominais bicicleta') cargaInput.value = '20';
                    else if (id === 'Bird Dog (equil√≠brio e core)') cargaInput.value = '10';
                    else if (id === 'Alongamentos + respira√ß√£o') cargaInput.value = '5-10 min';
                    else cargaInput.value = '';
                }
                if (feitoCheckbox) feitoCheckbox.checked = false;
                exercicioElement.classList.remove('feito');
                const detalhes = exercicioElement.querySelector('.detalhes');
                if (detalhes) detalhes.style.display = 'none'; // Fecha os detalhes
            });

            // Limpa o estado salvo no localStorage para o treino atual
            let treinoStates = JSON.parse(localStorage.getItem('treinoStates')) || {};
            delete treinoStates[treinoId];
            localStorage.setItem('treinoStates', JSON.stringify(treinoStates));
        }

        function exportToCsv() {
            const history = JSON.parse(localStorage.getItem('treinoHistory')) || [];
            let csvContent = "data:text/csv;charset=utf-8,Data,Treino,Exerc√≠cio,Carga,Feito\n";

            history.forEach(treinoRecord => {
                treinoRecord.exercises.forEach(exercise => {
                    csvContent += `${treinoRecord.date},${treinoRecord.treinoId},"${exercise.name}",${exercise.carga},${exercise.feito ? 'Sim' : 'N√£o'}\n`;
                });
            });

            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "historico_treino.csv");
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            alert('Hist√≥rico exportado para historico_treino.csv!');
        }

        function requestNotificationPermission() {
            if (!("Notification" in window)) {
                alert("Este navegador n√£o suporta notifica√ß√µes.");
            } else if (Notification.permission === "granted") {
                sendHydrationNotification();
            } else if (Notification.permission !== "denied") {
                Notification.requestPermission().then(permission => {
                    if (permission === "granted") {
                        sendHydrationNotification();
                    }
                });
            }
        }

        function sendHydrationNotification() {
            setTimeout(() => {
                new Notification("Lembrete de Treino", {
                    body: "Hora de beber √°gua ou fazer uma pausa de descanso! üíß",
                    icon: "icon-192x192.png" // √çcone para a notifica√ß√£o
                });
            }, 60 * 60 * 1000); // 60 minutos
            alert('Notifica√ß√£o de hidrata√ß√£o/descanso agendada para daqui a 60 minutos.');
        }

        function openHistoryModal() {
            const modal = document.getElementById('history-modal');
            const historyList = document.getElementById('history-list');
            historyList.innerHTML = ''; // Limpa antes de carregar

            const history = JSON.parse(localStorage.getItem('treinoHistory')) || [];

            if (history.length === 0) {
                historyList.innerHTML = '<p>Nenhum treino registado ainda.</p>';
                modal.style.display = 'flex'; // Usar flex para centralizar
                return;
            }

            history.forEach(record => {
                const itemDiv = document.createElement('div');
                itemDiv.classList.add('history-item');
                itemDiv.innerHTML = `
                    <p><strong>Data:</strong> ${record.date}</p>
                    <p><strong>Treino:</strong> ${record.treinoId.toUpperCase().replace('TREINO', 'Treino ')}</p>
                    <ul>
                        ${record.exercises.map(ex => `
                            <li>
                                <span>${ex.name}: Carga ${ex.carga || 'N/A'}</span>
                                <span style="color: ${ex.feito ? 'var(--primary-color)' : 'var(--error-color)'};">${ex.feito ? 'Feito ‚úÖ' : 'N√£o Feito ‚ùå'}</span>
                            </li>
                        `).join('')}
                    </ul>
                `;
                historyList.appendChild(itemDiv);
            });

            modal.style.display = 'flex'; // Usar flex para centralizar
        }

        function closeHistoryModal() {
            const modal = document.getElementById('history-modal');
            modal.style.display = 'none';
        }

        // Fechar modal ao clicar fora do conte√∫do
        window.onclick = function(event) {
            const modal = document.getElementById('history-modal');
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }
    </script>
    <script>
        // Criar manifest.json dinamicamente para PWA
        const manifest = {
            "name": "Plano de Treino",
            "short_name": "Treino",
            "description": "Aplica√ß√£o de plano de treino flex√≠vel e intuitivo.",
            "start_url": "./index.html",
            "display": "standalone",
            "background_color": "#1a1a1a",
            "theme_color": "#4CAF50",
            "icons": [
                {
                    "src": "icon-192x192.png",
                    "sizes": "192x192",
                    "type": "image/png"
                },
                {
                    "src": "icon-512x512.png",
                    "sizes": "512x512",
                    "type": "image/png"
                }
            ]
        };

        const manifestBlob = new Blob([JSON.stringify(manifest)], {type : 'application/json'});
        const manifestUrl = URL.createObjectURL(manifestBlob);
        document.querySelector('link[rel="manifest"]').setAttribute('href', manifestUrl);

        // Criar service-worker.js dinamicamente
        const serviceWorkerCode = `
            const CACHE_NAME = 'treino-app-cache-v1';
            const urlsToCache = [
                './',
                './index.html',
                './icon-192x192.png',
                './icon-512x512.png',
                'https://www.soundjay.com/buttons/sounds/beep-07.mp3'
            ];

            self.addEventListener('install', event => {
                event.waitUntil(
                    caches.open(CACHE_NAME)
                        .then(cache => {
                            console.log('Cache aberta');
                            return cache.addAll(urlsToCache);
                        })
                );
            });

            self.addEventListener('fetch', event => {
                event.respondWith(
                    caches.match(event.request)
                        .then(response => {
                            if (response) {
                                return response;
                            }
                            return fetch(event.request);
                        })
                );
            });

            self.addEventListener('activate', event => {
                const cacheWhitelist = [CACHE_NAME];
                event.waitUntil(
                    caches.keys().then(cacheNames => {
                        return Promise.all(
                            cacheNames.map(cacheName => {
                                if (cacheWhitelist.indexOf(cacheName) === -1) {
                                    return caches.delete(cacheName);
                                }
                            })
                        );
                    })
                );
            });
        `;
        const swBlob = new Blob([serviceWorkerCode], {type : 'application/javascript'});
        const swUrl = URL.createObjectURL(swBlob);
        // O registro do ServiceWorker j√° est√° no HTML
        // navigator.serviceWorker.register('/service-worker.js')
        // No entanto, para que o service worker seja acess√≠vel, ele precisa estar no root
        // ou voc√™ precisa servir este blob como um arquivo separado no servidor.
        // Para fins de demonstra√ß√£o local, esta abordagem √© mais complexa.
        // O ideal √© ter os arquivos manifest.json e service-worker.js fisicamente no root do projeto.

        // Para esta demonstra√ß√£o em um √∫nico arquivo HTML, o service worker n√£o ser√° instalado corretamente
        // porque o navegador espera que ele esteja em um arquivo .js separado no root.
        // Esta parte do c√≥digo PWA √© mais conceitual aqui.
    </script>
    <img src="icon-192x192.png" style="display:none;" alt="Placeholder icon for PWA">
    <img src="icon-512x512.png" style="display:none;" alt="Placeholder icon for PWA">
</body>
</html>
